"use strict";(self["webpackChunksupermall"]=self["webpackChunksupermall"]||[]).push([[486],{2905:function(e,t,s){s.r(t),s.d(t,{default:function(){return Y}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"home"}},[s("nav-bar",{staticClass:"home-nav"},[s("div",{attrs:{slot:"center"},slot:"center"},[e._v("购物街")])]),s("tab-control",{directives:[{name:"show",rawName:"v-show",value:e.isTabFixed,expression:"isTabFixed"}],ref:"tabControl1",staticClass:"tab-control",attrs:{titles:["流行","新款","精选"]},on:{tabClick:e.tabClick}}),s("scroll",{ref:"scroll",staticClass:"content ignore",attrs:{"probe-type":3,click:!0},on:{scroll:e.contentScroll,pullingUp:e.loadMore}},[s("home-swiper",{attrs:{banners:e.banners},on:{swiperImageLoad:e.swiperImageLoad}}),s("recommend-view",{attrs:{recommends:e.recommends}}),s("feature-view"),s("tab-control",{ref:"tabControl2",attrs:{titles:["流行","新款","精选"]},on:{tabClick:e.tabClick}}),s("goods-list",{attrs:{goods:e.showGoods}})],1),s("back-top",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],nativeOn:{click:function(t){return e.backClick.apply(null,arguments)}}})],1)},a=[],o=s(180),i=s(466),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tab-control"},e._l(e.titles,(function(t,r){return s("div",{staticClass:"tab-control-item",class:{active:r==e.currentIndex},on:{click:function(t){return e.itemClick(r)}}},[s("span",[e._v(e._s(t))])])})),0)},l=[],c={name:"TabControl",props:{titles:{type:Array,default(){return[]}}},data(){return{currentIndex:0}},methods:{itemClick(e){this.$emit("tabClick",e)}}},m=c,d=s(1001),u=(0,d.Z)(m,n,l,!1,null,"6cd09dbe",null),p=u.exports,h=s(9756),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("swiper",{attrs:{moveRatio:.05}},e._l(e.banners,(function(t){return s("swiper-item",{key:t.index},[s("a",{attrs:{href:t.link}},[s("img",{attrs:{src:t.image,alt:""},on:{load:e.imageLoad}})])])})),1)],1)},b=[],v=s(4167),g={name:"HomeSwiper",components:{Swiper:v.k,SwiperItem:v.t},data(){return{isLoad:!1}},props:{banners:{type:Array,default(){return[]}}},methods:{imageLoad(){this.isLoad||(this.$emit("swiperImageLoad"),this.isLoad=!0)}}},w=g,C=(0,d.Z)(w,f,b,!1,null,"2bcbe578",null),k=C.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"recommend"},e._l(e.recommends,(function(t){return s("div",{staticClass:"recommend-item"},[s("a",{attrs:{href:t.link}},[s("img",{attrs:{src:t.image,alt:""}}),s("div",[e._v(e._s(t.title))])])])})),0)},x=[],y={name:"RecommendView",props:{recommends:{type:Array,default(){return[]}}}},$=y,T=(0,d.Z)($,_,x,!1,null,"b343f066",null),L=T.exports,I=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},H=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"feature"},[r("a",{attrs:{href:"https://act.mogujie.com/zzlx67"}},[r("img",{attrs:{src:s(8775),alt:""}})])])}],S={name:"FeatureView"},G=S,Z=(0,d.Z)(G,I,H,!1,null,"c63f1570",null),E=Z.exports,F=s(2924);function M(){return(0,F.W)({url:"/home/multidata"})}function O(e,t){return(0,F.W)({url:"/home/data",params:{type:e,page:t}})}var V=s(2170),A={name:"Home",components:{NavBar:o.Z,Scroll:i.Z,TabControl:p,GoodsList:h.Z,HomeSwiper:k,RecommendView:L,FeatureView:E},data(){return{banners:[],recommends:[],goods:{pop:{page:0,list:[]},new:{page:0,list:[]},sell:{page:0,list:[]}},currentType:"pop",count:0,tabOffsetTop:632,isTabFixed:!1,saveY:0}},mixins:[V.x,V.s],computed:{showGoods(){return this.goods[this.currentType].list}},created(){this.getHomeMultidata(),this.getHomeGoods("pop"),this.getHomeGoods("new"),this.getHomeGoods("sell")},mounted(){},activated(){this.$refs.scroll.scrollTo(0,this.saveY,0),this.$refs.scroll.refresh()},deactivated(){this.saveY=this.$refs.scroll.scroll.y,this.$bus.$off("itemImageLoad",this.itemImageLoader)},methods:{getHomeMultidata(){M().then((e=>{this.banners=e.data.data.banner.list,this.recommends=e.data.data.recommend.list}))},getHomeGoods(e){const t=1+this.goods[e].page++;O(e,t).then((t=>{this.goods[e].list.push(...t.data.data.list)}))},tabClick(e){switch(e){case 0:this.currentType="pop";break;case 1:this.currentType="new";break;case 2:this.currentType="sell";break}this.$refs.tabControl1.currentIndex=e,this.$refs.tabControl2.currentIndex=e},contentScroll(e){this.isShow=-e.y>1e3,this.isTabFixed=-e.y>this.tabOffsetTop},loadMore(){this.getHomeGoods(this.currentType),this.$refs.scroll.finishPullUp()},swiperImageLoad(){this.tabOffsetTop=this.$refs.tabControl2.$el.offsetTop}}},N=A,R=(0,d.Z)(N,r,a,!1,null,"4058d06e",null),Y=R.exports},8775:function(e,t,s){e.exports=s.p+"img/recommend_bg.a1646d5d.jpg"}}]);
//# sourceMappingURL=486.1bb255a1.js.map