"use strict";(self["webpackChunksupermall"]=self["webpackChunksupermall"]||[]).push([[945],{1483:function(t,e,r){r.r(e),r.d(e,{default:function(){return P}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"home"}},[r("nav-bar",{staticClass:"home-nav"},[r("div",{attrs:{slot:"center"},slot:"center"},[t._v("购物街")])]),r("tab-control",{directives:[{name:"show",rawName:"v-show",value:t.isTabFixed,expression:"isTabFixed"}],ref:"tabControl1",staticClass:"tab-control",attrs:{titles:["流行","新款","精选"]},on:{tabClick:t.tabClick}}),r("scroll",{ref:"scroll",staticClass:"content ignore",attrs:{"probe-type":3,click:!0},on:{scroll:t.contentScroll,pullingUp:t.loadMore}},[r("home-swiper",{attrs:{banners:t.banners},on:{swiperImageLoad:t.swiperImageLoad}}),r("recommend-view",{attrs:{recommends:t.recommends}}),r("feature-view"),r("tab-control",{ref:"tabControl2",attrs:{titles:["流行","新款","精选"]},on:{tabClick:t.tabClick}}),r("goods-list",{attrs:{goods:t.showGoods}})],1),r("back-top",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],nativeOn:{click:function(e){return t.backClick.apply(null,arguments)}}})],1)},o=[];function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t){if(Array.isArray(t))return s(t)}r(2526),r(1817),r(1539),r(2165),r(8783),r(3948),r(1038);function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}r(7042),r(8309),r(4916),r(7601);function l(t,e){if(t){if("string"===typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}r(1703);function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return a(t)||i(t)||l(t)||c()}var m=r(180),d=r(466),f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tab-control"},t._l(t.titles,(function(e,n){return r("div",{staticClass:"tab-control-item",class:{active:n==t.currentIndex},on:{click:function(e){return t.itemClick(n)}}},[r("span",[t._v(t._s(e))])])})),0)},p=[],h={name:"TabControl",props:{titles:{type:Array,default:function(){return[]}}},data:function(){return{currentIndex:0}},methods:{itemClick:function(t){this.$emit("tabClick",t)}}},b=h,v=r(1001),g=(0,v.Z)(b,f,p,!1,null,"6cd09dbe",null),w=g.exports,y=r(9756),C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("swiper",{attrs:{moveRatio:.05}},t._l(t.banners,(function(e){return r("swiper-item",{key:e.index},[r("a",{attrs:{href:e.link}},[r("img",{attrs:{src:e.image,alt:""},on:{load:t.imageLoad}})])])})),1)],1)},k=[],_=r(4167),x={name:"HomeSwiper",components:{Swiper:_.k,SwiperItem:_.t},data:function(){return{isLoad:!1}},props:{banners:{type:Array,default:function(){return[]}}},methods:{imageLoad:function(){this.isLoad||(this.$emit("swiperImageLoad"),this.isLoad=!0)}}},$=x,T=(0,v.Z)($,C,k,!1,null,"2bcbe578",null),S=T.exports,I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"recommend"},t._l(t.recommends,(function(e){return r("div",{staticClass:"recommend-item"},[r("a",{attrs:{href:e.link}},[r("img",{attrs:{src:e.image,alt:""}}),r("div",[t._v(t._s(e.title))])])])})),0)},L=[],A={name:"RecommendView",props:{recommends:{type:Array,default:function(){return[]}}}},H=A,G=(0,v.Z)(H,I,L,!1,null,"b343f066",null),Z=G.exports,E=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},F=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"feature"},[n("a",{attrs:{href:"https://act.mogujie.com/zzlx67"}},[n("img",{attrs:{src:r(8775),alt:""}})])])}],O={name:"FeatureView"},j=O,M=(0,v.Z)(j,E,F,!1,null,"c63f1570",null),V=M.exports,N=r(2924);function R(){return(0,N.W)({url:"/home/multidata"})}function U(t,e){return(0,N.W)({url:"/home/data",params:{type:t,page:e}})}var Y=r(2170),z={name:"Home",components:{NavBar:m.Z,Scroll:d.Z,TabControl:w,GoodsList:y.Z,HomeSwiper:S,RecommendView:Z,FeatureView:V},data:function(){return{banners:[],recommends:[],goods:{pop:{page:0,list:[]},new:{page:0,list:[]},sell:{page:0,list:[]}},currentType:"pop",count:0,tabOffsetTop:632,isTabFixed:!1,saveY:0}},mixins:[Y.x,Y.s],computed:{showGoods:function(){return this.goods[this.currentType].list}},created:function(){this.getHomeMultidata(),this.getHomeGoods("pop"),this.getHomeGoods("new"),this.getHomeGoods("sell")},mounted:function(){},activated:function(){this.$refs.scroll.scrollTo(0,this.saveY,0),this.$refs.scroll.refresh()},deactivated:function(){this.saveY=this.$refs.scroll.scroll.y,this.$bus.$off("itemImageLoad",this.itemImageLoader)},methods:{getHomeMultidata:function(){var t=this;R().then((function(e){t.banners=e.data.data.banner.list,t.recommends=e.data.data.recommend.list}))},getHomeGoods:function(t){var e=this,r=1+this.goods[t].page++;U(t,r).then((function(r){var n;(n=e.goods[t].list).push.apply(n,u(r.data.data.list))}))},tabClick:function(t){switch(t){case 0:this.currentType="pop";break;case 1:this.currentType="new";break;case 2:this.currentType="sell";break}this.$refs.tabControl1.currentIndex=t,this.$refs.tabControl2.currentIndex=t},contentScroll:function(t){this.isShow=-t.y>1e3,this.isTabFixed=-t.y>this.tabOffsetTop},loadMore:function(){this.getHomeGoods(this.currentType),this.$refs.scroll.finishPullUp()},swiperImageLoad:function(){this.tabOffsetTop=this.$refs.tabControl2.$el.offsetTop}}},W=z,B=(0,v.Z)(W,n,o,!1,null,"4058d06e",null),P=B.exports},8775:function(t,e,r){t.exports=r.p+"img/recommend_bg.a1646d5d.jpg"}}]);
//# sourceMappingURL=945-legacy.4cf1ecf8.js.map